import { Button } from "std-widgets.slint";
import { CadastroPage } from "pages/cadastro.slint";
import { DashboardPage } from "pages/dashboard.slint";

export enum Page {
    Dashboard,
    Cadastro,
    Financeiro,
    Config
}

export component AppWindow inherits Window {
    min-width: 1600px;
    min-height: 900px;

    in property <length> largura_button: 140px;
    in property <length> tamanho_borda: 30px;

    // ==============================================================================//
    //                                       Dados Backend                           //
    // ==============================================================================//
    in property <int> total_clientes;
    in property <int> clientes_em_dia;
    in property <int> clientes_atrasados;
    in property <int> plano_diario;
    in property <int> plano_mensal;
    in property <int> plano_trimestral;
    in property <int> plano_semestral;
    in property <int> plano_anual;

    in property <float> percentual_clientes_em_dia;
    in property <float> percentual_clientes_atrasados;
    in property <float> percentual_plano_diario;
    in property <float> percentual_plano_mensal;
    in property <float> percentual_plano_trimestral;
    in property <float> percentual_plano_semestral;
    in property <float> percentual_plano_anual;

    in-out property <Page> pagina_atual: Page.Dashboard;

    callback filtro_dashboard(string, string, string, string, string, string);
    callback dashboard_load();

    VerticalLayout {
        // ==============================================================================//
        //                                       Sidebar                                 //
        // ==============================================================================//
        Rectangle {
            //width: 100px;
            height: 80px;
            background: #dfdfdf;
            border-radius: 10px;

            HorizontalLayout {
                padding: 8px;
                spacing: 6px;
                Rectangle { }

                Rectangle {
                    border-radius: tamanho_borda;
                    background: pagina_atual == Page.Dashboard ? #2563eb : #a200ff;
                    width: largura_button;

                    TouchArea {
                        clicked => {
                            pagina_atual = Page.Dashboard;
                        }
                    }

                    Text {
                        text: "Dashboard";
                        color: white;
                        horizontal-alignment: center;
                        vertical-alignment: center;
                    }
                }

                Rectangle {
                    width: largura_button;
                    border-radius: tamanho_borda;
                    background: pagina_atual == Page.Cadastro ? #2563eb : #a200ff;
                    TouchArea {
                        clicked => {
                            pagina_atual = Page.Cadastro;
                        }
                        Text {
                            text: "Cadastro";
                            color: white;
                            horizontal-alignment: center;
                            vertical-alignment: center;
                        }
                    }
                }

                Rectangle {
                    border-radius: tamanho_borda;
                    background: pagina_atual == Page.Financeiro ? #2563eb : #a200ff;
                    width: largura_button;
                    TouchArea {
                        clicked => {
                            pagina_atual = Page.Financeiro;
                        }
                        Text {
                            text: "Financeiro";
                            color: white;
                            horizontal-alignment: center;
                            vertical-alignment: center;
                        }
                    }
                }

                Rectangle {
                    width: largura_button;
                    border-radius: tamanho_borda;
                    background: pagina_atual == Page.Config ? #2563eb : #a200ff;
                    TouchArea {
                        clicked => {
                            pagina_atual = Page.Config;
                        }
                        Text {
                            text: "Configuração";
                            color: white;
                            horizontal-alignment: center;
                            vertical-alignment: center;
                        }
                    }
                }

                Rectangle { }
            }
        }
        // ==============================================================================//
        //                                  Navegação entre janelas                      //
        // ==============================================================================//
        Rectangle {
            background: #f3f4f6;
            if(pagina_atual == Page.Dashboard): DashboardPage {
                total_clientes: root.total_clientes;
                clientes_em_dia: root.clientes_em_dia;
                clientes_atrasados: root.clientes_atrasados;
                plano_diario: root.plano_diario;
                plano_mensal: root.plano_mensal;
                plano_trimestral: root.plano_trimestral;
                plano_semestral: root.plano_semestral;
                plano_anual: root.plano_anual;

                percentual_clientes_em_dia: root.percentual_clientes_em_dia;
                percentual_clientes_atrasados: root.percentual_clientes_atrasados;
                percentual_plano_diario: root.percentual_plano_diario;
                percentual_plano_mensal: root.percentual_plano_mensal;
                percentual_plano_trimestral: root.percentual_plano_trimestral;
                percentual_plano_semestral: root.percentual_plano_semestral;
                percentual_plano_anual: root.percentual_plano_anual;
                filtro_dashboard(i_dia, i_mes, i_ano, f_dia, f_mes, f_ano) => {
                    root.filtro_dashboard( i_dia, i_mes, i_ano, f_dia, f_mes, f_ano)
                };
                loaded => {
                    root.dashboard_load();
                }
            }

            if (pagina_atual == Page.Cadastro): CadastroPage { }
        }
    }
}
